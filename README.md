### è®°å½•ä¸€ä¸‹ change-logã€

æ¯ä¸ª npm åŒ…ä¸­éƒ½æœ‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œå¦‚æœè¦å‘åŒ…çš„è¯ï¼Œpackage.json ä¸­çš„ version å°±æ˜¯ç‰ˆæœ¬å·äº†ã€‚
version å­—æ®µç»“æ„ä¸ºï¼š'0.0.0-0'
åˆ†åˆ«ä»£è¡¨ï¼šå¤§å·.ä¸­å·.å°å·-é¢„å‘å¸ƒå·ï¼Œå¯¹åº” majon.minor.patch-prerelease
ä¸‹é¢æ¥çœ‹çœ‹ npm ä¸­ version çš„ç±»åˆ«åŠæè¿°ã€‚

ä¸‹é¢æ¥çœ‹çœ‹ npm ä¸­ version çš„ç±»åˆ«åŠæè¿°ã€‚

- major

  - å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼Œåˆ™ç›´æ¥å‡çº§ä¸€ä½å¤§å·ï¼Œå…¶ä»–ä½éƒ½ç½®ä¸º 0
  - å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼š

    - ä¸­å·å’Œå°å·éƒ½ä¸º 0ï¼Œåˆ™ä¸å‡çº§å¤§å·ï¼Œè€Œå°†é¢„å‘å¸ƒå·åˆ æ‰ã€‚å³ 2.0.0-1 å˜æˆ 2.0.0ï¼Œè¿™å°±æ˜¯é¢„å‘å¸ƒçš„ä½œç”¨

    - å¦‚æœä¸­å·å’Œå°å·æœ‰ä»»æ„ä¸€ä¸ªä¸æ˜¯ 0ï¼Œé‚£è¾¹ä¼šå‡çº§ä¸€ä½å¤§å·ï¼Œå…¶ä»–ä½éƒ½ç½®ä¸º 0ï¼Œæ¸…ç©ºé¢„å‘å¸ƒå·ã€‚å³ 2.0.1-0 å˜æˆ 3.0.0

- minor

  å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼Œåˆ™å‡çº§ä¸€ä½ä¸­å·ï¼Œå¤§å·ä¸åŠ¨ï¼Œå°å·ç½®ä¸ºç©º
  å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼š

  - å¦‚æœå°å·ä¸º 0ï¼Œåˆ™ä¸å‡çº§ä¸­å·ï¼Œå°†é¢„å‘å¸ƒå·å»æ‰
  - å¦‚æœå°å·ä¸ä¸º 0ï¼ŒåŒç†æ²¡æœ‰é¢„å‘å¸ƒå·

- patch
  å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼šç›´æ¥å‡çº§å°å·ï¼Œå»æ‰é¢„å‘å¸ƒå·
  å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼šå»æ‰é¢„å‘å¸ƒå·ï¼Œå…¶ä»–ä¸åŠ¨

- premajor
  ç›´æ¥å‡çº§å¤§å·ï¼Œä¸­å·å’Œå°å·ç½®ä¸º 0ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0

- preminor
  ç›´æ¥å‡çº§ä¸­å·ï¼Œå°å·ç½®ä¸º 0ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0

- prepatch
  ç›´æ¥å‡çº§å°å·ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0

- prerelease
  å¦‚æœæ²¡æœ‰é¢„å‘å¸ƒå·ï¼šå¢åŠ å°å·ï¼Œå¢åŠ é¢„å‘å¸ƒå·ä¸º 0
  å¦‚æœæœ‰é¢„å‘å¸ƒå·ï¼Œåˆ™å‡çº§é¢„å‘å¸ƒå·

---

æ‰§è¡Œå‘½ä»¤ npm version å¯ä»¥è‡ªåŠ¨æ›´æ”¹ package.json ä¸­çš„ç‰ˆæœ¬å·
æ¯”å¦‚ï¼Œpackage.json åŒ…ä¸­çš„ version æ˜¯ 1.1.1ï¼Œç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```js
npm version prerelease -m "è¿™é‡Œä½ å¯ä»¥æ·»åŠ æ­¤æ¬¡æ›´æ–°ç‰ˆæœ¬å·çš„æè¿°"
```

æ‰§è¡Œå®Œä¹‹åï¼Œpackage.json çš„ç‰ˆæœ¬å·åˆ™ä¼šå˜æˆ 1.1.1-0ï¼ŒåŒæ—¶ï¼Œåœ¨ git ä¸­ä¼šå¤šä¸€ä¸ª commit logã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œ npm version å¿…é¡»ä¿è¯å·¥ä½œç›®å½•æ˜¯å¹²å‡€çš„ï¼Œæ²¡æœ‰ä»»ä½•æœªæäº¤çš„æ–‡æ¡£ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

### è‡ªåŠ¨ç”Ÿæˆ change log

å¦‚æœæ‰€æœ‰çš„ commit éƒ½ç¬¦åˆæ ¼å¼ï¼Œé‚£ä¹ˆå‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œchange log å°±å¯ä»¥ç”¨è„šæœ¬è‡ªåŠ¨ç”Ÿæˆ

```js
npm i conventional-changelog-cli --save-dev
```

é…ç½® package.json

```js
"changelog": "conventional-changelog -p angular -i CHANGELOG.md -s -r 0"
```

ä¸Šé¢ changelog å‘½ä»¤ä¸ä¼šè¦†ç›–ä»¥å‰çš„ CHANGELOGï¼Œåªä¼šåœ¨ CHANGELOG.md çš„å¤´éƒ¨åŠ ä¸Šè‡ªä»ä¸Šæ¬¡å‘å¸ƒä»¥æ¥çš„å˜åŠ¨ã€‚

```js
npm run changelog
```

ç”Ÿæˆ CHANGELOG.md æ–‡ä»¶

å‚è€ƒæ–‡ç« ï¼š https://juejin.cn/post/6844903888072654856#heading-5

### é…ç½® changelog-option.js

> å¯ä»¥é…ç½®ä¹Ÿå¯ä»¥ä¸é…ç½®ï¼Œçœ‹è‡ªå·±éœ€æ±‚

changelog-option.js æ–‡ä»¶ï¼Œè§‚å¯Ÿè¿™ä¸ªæ–‡ä»¶åï¼Œå‘ç°æ­£æ˜¯è¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å“ªäº› git commit è¦å†™å…¥æ›´æ–°æ—¥å¿—ï¼Œä»¥åŠç”Ÿæˆæ—¥å¿—çš„æ¯å—å†…å®¹çš„æ ‡é¢˜ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘åªå…³æ³¨ feat(æ–°åŠŸèƒ½) ã€fix(Bug ä¿®å¤) ã€perf(æ€§èƒ½ä¼˜åŒ–)ã€revert(å›é€€)ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥åœ¨é…ç½®ä¸­è¿™æ ·å†™ã€‚

```js
module.exports = {
  writerOpts: {
    transform: (commit, context) => {
      if (commit.type === "feat") {
        commit.type = "âœ¨ Features | æ–°åŠŸèƒ½";
      } else if (commit.type === "fix") {
        commit.type = "ğŸ› Bug Fixes | Bug ä¿®å¤";
      } else if (commit.type === "perf") {
        commit.type = "âš¡ Performance Improvements | æ€§èƒ½ä¼˜åŒ–";
      } else if (commit.type === "revert" || commit.revert) {
        commit.type = "âª Reverts | å›é€€";
      }
      return;
    },
  },
};
```
